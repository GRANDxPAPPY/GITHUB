using System.Security.Cryptography;

namespace WinFormsApp1
{



    public partial class Form1 : Form
    {
        // Initilized and inventory for form 1 and a bindnig source
        Inventory inventory = new Inventory();
        BindingSource MyBind = new BindingSource();
        public Form1()
        {
            InitializeComponent();

            //Making Grid Populate with data from inventory
            MyBind.DataSource = inventory.AllParts;
            dataGridView1.DataSource = MyBind;
            button3.Enabled = false;
        }


        private void button3_Click(object sender, EventArgs e)
        {
            if (button3.Enabled == false)
            {
                return;
            }
            else
            {
            var x = new Form2(inventory);
            var Flopping = new Flop(x.panel1, x.panel2);
            Flopping.FlopPage(1);
            x.ShowDialog();
        }}

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }

        private void textBox2_TextChanged(object sender, EventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {
            //This is the search button
            if (!int.TryParse(textBox1.Text, out var conv))
            {
                MessageBox.Show("Please enter a valid numeric Part ID.", "Invalid input", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                return;
            }

            // call LookupPart on the existing inventory instance (not a new one)
            var foundIndex = inventory.LookupPart(conv);

            if (foundIndex >= 0)
            {
                // notify the binding that the list changed so the grid updates
                MyBind.ResetBindings(false);

                // select the first moved item in the grid
                dataGridView1.ClearSelection();
                if (dataGridView1.Rows.Count > foundIndex)
                {
                    dataGridView1.Rows[foundIndex].Selected = true;
                    button3.Enabled = true;
                }
            }
            else
            {
                MessageBox.Show($"No part with ID {conv} was found.", "Not found", MessageBoxButtons.OK, MessageBoxIcon.Information);
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            var x = new Form2(inventory);
            var Flopping = new Flop(x.panel1, x.panel2);
            Flopping.FlopPage(0);
            x.ShowDialog();


        }

        private void button5_Click(object sender, EventArgs e)
        {

        }

        private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {

        }

        private void textBox4_TextChanged(object sender, EventArgs e)
        {

        }

        private void textBox5_TextChanged(object sender, EventArgs e)
        {

        }



        private void TestButton_Click(object sender, EventArgs e)
        {



        }
        private void AddPageButton_Click(object sender, EventArgs e)
        {

        }

        private void textBox7_TextChanged(object sender, EventArgs e)
        {

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void label6_Click(object sender, EventArgs e)
        {

        }

        private void button1_Click_1(object sender, EventArgs e)
        {
            var x = new Form3();
            var Flopping = new Flop(x.panel1, x.panel2);
            Flopping.FlopPage(0);
            x.ShowDialog();
        }

        private void button2_Click_1(object sender, EventArgs e)
        {
            var x = new Form3();
            var Flopping = new Flop(x.panel1, x.panel2);
            Flopping.FlopPage(1);
            x.ShowDialog();
        }

        private void dataGridView1_CellContentClick_1(object sender, DataGridViewCellEventArgs e)
        {
            // Getting ID Data From Grid For use!
            //var x = dataGridView1.SelectedRows[0].DataBoundItem as Part;
            //var y = x.PartID.ToString();
            //button3.Enabled = true; NEED TO BUILD THIS IN THE CLASS !!!
        }

        private void button4_Click(object sender, EventArgs e)
        {
            Close();
        }
    }

}

